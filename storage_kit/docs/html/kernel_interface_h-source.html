<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/cvsroot/OpenBeOS/storage_kit/source/lib/kernel_interface.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.1 on Sat Feb 23 17:20:29 2002 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/cvsroot/OpenBeOS/storage_kit/source/lib/kernel_interface.h</h1><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------</font>
00002 <font class="comment">//  This software is part of the OpenBeOS distribution and is covered </font>
00003 <font class="comment">//  by the OpenBeOS license.</font>
00004 <font class="comment">//</font>
00005 <font class="comment">//  File Name: kernel_interface.h</font>
00006 <font class="comment">//  Description: This is the internal interface used by the Storage Kit</font>
00007 <font class="comment">//  to communicate with the kernel</font>
00008 <font class="comment">//---------------------------------------------------------------------</font>
00009 <font class="preprocessor">#ifndef _sk_kernel_interface_h_
</font>00010 <font class="preprocessor"></font><font class="preprocessor">#define _sk_kernel_interface_h_
</font>00011 <font class="preprocessor"></font>
00012 <font class="preprocessor">#include &lt;SupportKit.h&gt;</font>
00013 <font class="preprocessor">#include "Error.h"</font>
00014 
00015 <font class="keyword">typedef</font> <font class="keyword">struct </font>attr_info;
00016 
00017 <font class="keyword">namespace</font> StorageKit {
00018 
00019 <font class="comment">// Modes for opening files</font>
00020 <font class="keyword">typedef</font> <font class="keyword">enum</font> {
00021     READ,
00022     WRITE,
00023     READ_WRITE
00024 } OpenMode;
00025 
00026 <font class="comment">// File descriptor type</font>
00027 <font class="keyword">typedef</font> <font class="keywordtype">int</font> FileDescriptor;
00028 
00029 <font class="comment">//----------------------------------------------------------------------</font>
00030 <font class="comment">// user_* functions pulled from NewOS's vfs.h (with the "user_" part removed)</font>
00031 <font class="comment">//----------------------------------------------------------------------</font>
00032 <font class="comment">//int mount(const char *path, const char *device, const char *fs_name, void *args);</font>
00033 <font class="comment">//int unmount(const char *path);</font>
00034 <font class="comment">//int sync(void); </font>
00035 <font class="comment">//int open(const char *path, stream_type st, int omode);</font>
00036 <font class="comment">//int close(int fd);</font>
00037 <font class="comment">//int fsync(int fd);</font>
00038 <font class="comment">//ssize_t read(int fd, void *buf, off_t pos, ssize_t len);</font>
00039 <font class="comment">//ssize_t write(int fd, const void *buf, off_t pos, ssize_t len);</font>
00040 <font class="comment">//int seek(int fd, off_t pos, seek_type seek_type);</font>
00041 <font class="comment">//int ioctl(int fd, int op, void *buf, size_t len);</font>
00042 <font class="comment">//int create(const char *path, stream_type stream_type);</font>
00043 <font class="comment">//int unlink(const char *path);</font>
00044 <font class="comment">//int rename(const char *oldpath, const char *newpath);</font>
00045 <font class="comment">//int rstat(const char *path, struct file_stat *stat);</font>
00046 <font class="comment">//int wstat(const char *path, struct file_stat *stat, int stat_mask);</font>
00047 <font class="comment">//int getcwd(char *buf, size_t size);</font>
00048 <font class="comment">//int setcwd(const char* path);</font>
00049 <font class="comment">//int dup(int fd);</font>
00050 <font class="comment">//int dup2(int ofd, int nfd);</font>
00051 <font class="comment">//----------------------------------------------------------------------</font>
00052 
00053 
00054 FileDescriptor Open(<font class="keyword">const</font> <font class="keywordtype">char</font> *path, OpenMode mode) <font class="keywordflow">throw</font> (Error);
00055 <font class="keywordtype">int</font> Close(FileDescriptor file);
00056 
00057 ssize_t read_attr(FileDescriptor file, <font class="keyword">const</font> <font class="keywordtype">char</font> *attribute, uint32 type, 
00058                 off_t pos, <font class="keywordtype">void</font> *buf, size_t count);
00059 
00060 ssize_t write_attr (FileDescriptor file, <font class="keyword">const</font> <font class="keywordtype">char</font> *attribute, uint32 type, 
00061              off_t pos, <font class="keyword">const</font> <font class="keywordtype">void</font> *buf, size_t count );
00062 
00063 <font class="keywordtype">int</font> remove_attr(FileDescriptor file, <font class="keyword">const</font> <font class="keywordtype">char</font> *attr );
00064 
00065 <font class="keywordtype">void</font> rewind_attr_dir(<font class="keywordtype">void</font> *cookie );
00066 
00067 <font class="keywordtype">int</font> close_attr_dir(<font class="keywordtype">void</font> *cookie );
00068 
00069 <font class="keywordtype">int</font> stat_attr( FileDescriptor file, <font class="keyword">const</font> <font class="keywordtype">char</font> *name, attr_info *ai );
00070 
00071 }
00072 
00073 <font class="preprocessor">#endif
</font></div></pre><hr><address><small>Generated at Sat Feb 23 17:20:29 2002 for OpenBeOS Storage Kit by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
