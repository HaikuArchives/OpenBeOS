<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta name="robots" content="noindex">
<meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>/mahony/code/beos/cvs_work/open-beos/storage_kit/source/lib/kernel_interface.KEITH.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.1 on Sun Feb 17 19:26:12 2002 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; </center>
<hr><h1>/mahony/code/beos/cvs_work/open-beos/storage_kit/source/lib/kernel_interface.KEITH.h</h1><div class="fragment"><pre>00001 <font class="comment">//----------------------------------------------------------------------</font>
00002 <font class="comment">// kernel_interface.h</font>
00003 <font class="comment">// This is the internal interface used by the storage kit to </font>
00004 <font class="comment">// communicate with the kernel</font>
00005 <font class="comment">//----------------------------------------------------------------------</font>
00006 <font class="preprocessor">#ifndef _sk_kernel_interface_h_
</font>00007 <font class="preprocessor"></font><font class="preprocessor">#define _sk_kernel_interface_h_
</font>00008 <font class="preprocessor"></font>
00009 <font class="comment">//#include &lt;SupportKit.h&gt; </font>
00010 <font class="preprocessor">#include &lt;SKError.h&gt;</font>
00011 
00012 <font class="preprocessor">#include &lt;sys/types.h&gt;</font>
00013 <font class="preprocessor">#include &lt;sys/stat.h&gt;</font>
00014 
00015 
00016 <font class="comment">// stolen from the NewOS kernel</font>
00017 <font class="keyword">typedef</font> <font class="keyword">enum</font> {
00018 STREAM_TYPE_ANY = 0,
00019 STREAM_TYPE_FILE,
00020 STREAM_TYPE_DIR,
00021 STREAM_TYPE_DEVICE
00022 } stream_type;
00023 
00024 <font class="keyword">typedef</font> <font class="keyword">enum</font> {
00025 SEEK_SET = 0,
00026 SEEK_CUR,
00027 SEEK_END
00028 } seek_type;
00029 
00030 <font class="comment">/* VFS errors */</font>
00031 <font class="preprocessor">#define ERR_VFS_GENERAL          -3072
</font>00032 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_INVALID_FS       ERR_VFS_GENERAL-1
</font>00033 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_NOT_MOUNTPOINT   ERR_VFS_GENERAL-2
</font>00034 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_PATH_NOT_FOUND   ERR_VFS_GENERAL-3
</font>00035 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_INSUFFICIENT_BUF ERR_VFS_GENERAL-4
</font>00036 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_READONLY_FS      ERR_VFS_GENERAL-5
</font>00037 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_ALREADY_EXISTS   ERR_VFS_GENERAL-6
</font>00038 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_FS_BUSY          ERR_VFS_GENERAL-7
</font>00039 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_FD_TABLE_FULL    ERR_VFS_GENERAL-8
</font>00040 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_CROSS_FS_RENAME  ERR_VFS_GENERAL-9
</font>00041 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_DIR_NOT_EMPTY    ERR_VFS_GENERAL-10
</font>00042 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_NOT_DIR          ERR_VFS_GENERAL-11
</font>00043 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_WRONG_STREAM_TYPE   ERR_VFS_GENERAL-12
</font>00044 <font class="preprocessor"></font><font class="preprocessor">#define ERR_VFS_ALREADY_MOUNTPOINT ERR_VFS_GENERAL-13
</font>00045 <font class="preprocessor"></font><font class="comment">/* General errors */</font>
00046 <font class="preprocessor">#define NO_ERROR 0
</font>00047 <font class="preprocessor"></font><font class="preprocessor">#define ERR_GENERAL              -1
</font>00048 <font class="preprocessor"></font><font class="preprocessor">#define ERR_NO_MEMORY            ERR_GENERAL-1
</font>00049 <font class="preprocessor"></font><font class="preprocessor">#define ERR_IO_ERROR             ERR_GENERAL-2
</font>00050 <font class="preprocessor"></font><font class="preprocessor">#define ERR_INVALID_ARGS         ERR_GENERAL-3
</font>00051 <font class="preprocessor"></font><font class="preprocessor">#define ERR_TIMED_OUT            ERR_GENERAL-4
</font>00052 <font class="preprocessor"></font><font class="preprocessor">#define ERR_NOT_ALLOWED          ERR_GENERAL-5
</font>00053 <font class="preprocessor"></font><font class="preprocessor">#define ERR_PERMISSION_DENIED    ERR_GENERAL-6
</font>00054 <font class="preprocessor"></font><font class="preprocessor">#define ERR_INVALID_BINARY       ERR_GENERAL-7
</font>00055 <font class="preprocessor"></font><font class="preprocessor">#define ERR_INVALID_HANDLE       ERR_GENERAL-8
</font>00056 <font class="preprocessor"></font><font class="preprocessor">#define ERR_NO_MORE_HANDLES      ERR_GENERAL-9
</font>00057 <font class="preprocessor"></font><font class="preprocessor">#define ERR_UNIMPLEMENTED        ERR_GENERAL-10
</font>00058 <font class="preprocessor"></font><font class="preprocessor">#define ERR_TOO_BIG              ERR_GENERAL-11
</font>00059 <font class="preprocessor"></font><font class="preprocessor">#define ERR_NOT_FOUND            ERR_GENERAL-12
</font>00060 <font class="preprocessor"></font><font class="preprocessor">#define ERR_NOT_IMPLEMENTED_YET  ERR_GENERAL-13
</font>00061 <font class="preprocessor"></font><font class="preprocessor">#define ERR_NOMORE_HANDLES       ERR_GENERAL-14
</font>00062 <font class="preprocessor"></font>
00063 
00064 <font class="comment">//----------------------------------------------------------------------</font>
00065 <font class="comment">// user_* functions pulled from NewOS's vfs.h (with the "user_" part removed)</font>
00066 <font class="comment">//----------------------------------------------------------------------</font>
00067 <font class="comment">//int mount(const char *path, const char *device, const char *fs_name, void *args);</font>
00068 <font class="comment">//int unmount(const char *path);</font>
00069 <font class="comment">//int sync(void); </font>
00070 <font class="comment">//int open(const char *path, stream_type st, int omode);</font>
00071 <font class="comment">//int close(int fd);</font>
00072 <font class="comment">//int fsync(int fd);</font>
00073 <font class="comment">//ssize_t read(int fd, void *buf, off_t pos, ssize_t len);</font>
00074 <font class="comment">//ssize_t write(int fd, const void *buf, off_t pos, ssize_t len);</font>
00075 <font class="comment">//int seek(int fd, off_t pos, seek_type seek_type);</font>
00076 <font class="comment">//int ioctl(int fd, int op, void *buf, size_t len);</font>
00077 <font class="comment">//int create(const char *path, stream_type stream_type);</font>
00078 <font class="comment">//int unlink(const char *path);</font>
00079 <font class="comment">//int rename(const char *oldpath, const char *newpath);</font>
00080 <font class="comment">//int rstat(const char *path, struct file_stat *stat);</font>
00081 <font class="comment">//int wstat(const char *path, struct file_stat *stat, int stat_mask);</font>
00082 <font class="comment">//int getcwd(char *buf, size_t size);</font>
00083 <font class="comment">//int setcwd(const char* path);</font>
00084 <font class="comment">//int dup(int fd);</font>
00085 <font class="comment">//int dup2(int ofd, int nfd);</font>
00086 <font class="comment">//----------------------------------------------------------------------</font>
00087 
00088 <font class="keyword">namespace</font> storage_kit {
00089 
00090 <font class="keywordtype">int</font> open(<font class="keyword">const</font> <font class="keywordtype">char</font> *path, stream_type st, <font class="keywordtype">int</font> omode);
00091 <font class="keywordtype">int</font> close(<font class="keywordtype">int</font> fd);
00092 size_t read(<font class="keywordtype">int</font> fd, <font class="keywordtype">void</font> *buf, off_t pos, ssize_t len);
00093 size_t write(<font class="keywordtype">int</font> fd, <font class="keyword">const</font> <font class="keywordtype">void</font> *buf, off_t pos, ssize_t len);
00094 <font class="keywordtype">int</font> alloc_fd();
00095 <font class="keywordtype">void</font> free_fd(<font class="keywordtype">int</font> fd);
00096 
00097 
00098 }
00099 
00100 <font class="preprocessor">#endif
</font>00101 <font class="preprocessor"></font>
</div></pre><hr><address><small>Generated at Sun Feb 17 19:26:12 2002 for OpenBeOS Storage Kit by
<a href="http://www.stack.nl/~dimitri/doxygen/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2000</small></address>
</body>
</html>
