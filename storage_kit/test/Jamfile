# This is $(TOP)/test/Jamfile

SubDir TOP test ;

# Point the compiler to location of the CppUnit headers
HDRS += "$(TOP)/cppunit/include" ;

SOURCE_FILES =
	TestUtils.cpp
	BasicTest.cpp
	DirectoryTest.cpp
	EntryTest.cpp
	FileTest.cpp
	NodeTest.cpp
	PathTest.cpp
	SymLinkTest.cpp
;

# Version of our test suite that links with Be's R5 libraries

LibraryFromR5Sources $(TOP)/test/libstoragetest.R5.a : $(SOURCE_FILES) ;
Main Test.StorageKit.R5 : Test.StorageKit.cpp ;
LinkLibraries Test.StorageKit.R5 : 
	$(TOP)/test/libstoragetest.R5.a
	$(TOP)/cppunit/cppunit.a 
;
LinkSharedOSLibs Test.StorageKit.R5 :
	/boot/develop/lib/x86/libstdc++.r4.so
	/boot/develop/lib/x86/libbe.so
;


# Version of our test suite that links with OpenBeOS libraries

HDRS += "$(TOP)/source/lib" ;

LibraryFromPOSIXSources $(TOP)/test/libstoragetest.POSIX.a :  $(SOURCE_FILES) ;
Main Test.StorageKit.OpenBeOS : Test.StorageKit.cpp ;
LinkLibraries Test.StorageKit.OpenBeOS : 
	$(TOP)/test/libstoragetest.POSIX.a 
	$(TOP)/cppunit/cppunit.a 
	$(TOP)/source/lib/libstorage.a
;
LinkSharedOSLibs Test.StorageKit.OpenBeOS :
	/boot/develop/lib/x86/libstdc++.r4.so
;
